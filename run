#!/bin/bash
# Run the Flask app from the project root

export FLASK_APP=backend/app.py
export FLASK_ENV=development

PORT=5000
while true; do
  # Try to bind to the port using Python (works everywhere)
  python -c "import socket; s=socket.socket(); exit(s.connect_ex(('127.0.0.1', $PORT)))" >/dev/null 2>&1
  if [ $? -ne 0 ]; then
    break
  fi
  PORT=$((PORT+1))
done

echo "Starting Flask app on port $PORT..."
flask run --port=$PORT 